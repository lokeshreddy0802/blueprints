{"status":{},"spec":{"name":"EraPostgresProvision-HA","description":"","resources":{"service_definition_list":[{"name":"Era","description":"","variable_list":[{"type":"LOCAL","name":"CLEANUP_OPERATION_ID","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"CLUSTER_ID","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"COMPUTE_PROF_ID","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"CREATE_OPERATION_ID","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"DB_ENTITY_NAME","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"DB_ID","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"DB_PARAM_ID","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"DB_SERVER_ID","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"DB_SERVER_IP","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"DEREGISTER_OPERATION_ID","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"NETWORK_PROF_ID","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"SLA_ID","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"SOFTWARE_PROF_ID","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"SOFTWARE_PROF_VERSION_ID","description":"","options":{"type":"PREDEFINED","choices":[]},"is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"value":""},{"type":"LOCAL","name":"vm_name","description":"","options":{"type":"PREDEFINED","choices":[]},"is_hidden":true,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"editables":{"value":false},"value":""}],"action_list":[{"type":"system","name":"action_create","description":"System action for creating an application","runbook":{"name":"975ed99a_runbook","description":"","task_definition_list":[{"type":"DAG","name":"0bfadcbf_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"0bfadcbf_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_delete","description":"System action for deleting an application. Deletes created VMs as well","runbook":{"name":"cf884050_runbook","description":"","task_definition_list":[{"type":"DAG","name":"9ade3d68_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"9ade3d68_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_restart","description":"System action for restarting an application","runbook":{"name":"6bcf94d3_runbook","description":"","task_definition_list":[{"type":"DAG","name":"1124d60e_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"1124d60e_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_start","description":"System action for starting an application","runbook":{"name":"84c12573_runbook","description":"","task_definition_list":[{"type":"DAG","name":"0ae24e3c_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"0ae24e3c_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_stop","description":"System action for stopping an application","runbook":{"name":"6e2e5ff2_runbook","description":"","task_definition_list":[{"type":"DAG","name":"bf858e3b_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"bf858e3b_dag","kind":"app_task"},"variable_list":[]},"critical":false}],"depends_on_list":[],"port_list":[],"singleton":false,"tier":""},{"name":"Postgres","description":"","variable_list":[],"action_list":[{"type":"system","name":"action_create","description":"System action for creating an application","runbook":{"name":"01945104_runbook","description":"","task_definition_list":[{"type":"DAG","name":"6fba9cbb_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Postgres","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"6fba9cbb_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_delete","description":"System action for deleting an application. Deletes created VMs as well","runbook":{"name":"fe42eb38_runbook","description":"","task_definition_list":[{"type":"DAG","name":"8bee20f0_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Postgres","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"8bee20f0_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_restart","description":"System action for restarting an application","runbook":{"name":"ffd25064_runbook","description":"","task_definition_list":[{"type":"DAG","name":"04cc6e24_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Postgres","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"04cc6e24_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_start","description":"System action for starting an application","runbook":{"name":"ef6acd35_runbook","description":"","task_definition_list":[{"type":"DAG","name":"9d7e4dfb_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Postgres","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"9d7e4dfb_dag","kind":"app_task"},"variable_list":[]},"critical":false},{"type":"system","name":"action_stop","description":"System action for stopping an application","runbook":{"name":"b81e8f8b_runbook","description":"","task_definition_list":[{"type":"DAG","name":"897e9b24_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Postgres","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"897e9b24_dag","kind":"app_task"},"variable_list":[]},"critical":false}],"depends_on_list":[],"port_list":[],"singleton":false,"tier":""}],"published_service_definition_list":[],"substrate_definition_list":[{"type":"EXISTING_VM","name":"EraServer","description":"","variable_list":[],"action_list":[],"create_spec":{"type":"PROVISION_EXISTING_MACHINE","address":"@@{era_ip}@@"},"os_type":"Linux","readiness_probe":{"login_credential_local_reference":{"name":"era_creds","kind":"app_credential"},"connection_type":"SSH","connection_port":22,"delay_secs":"60","retries":"5","address":"@@{ip_address}@@","disable_readiness_probe":true,"connection_protocol":""}},{"type":"EXISTING_VM","name":"Era_PostgreSQL_DB","description":"","variable_list":[],"action_list":[],"create_spec":{"type":"PROVISION_EXISTING_MACHINE","address":"@@{Era.DB_SERVER_IP}@@"},"os_type":"Linux","readiness_probe":{"login_credential_local_reference":{"name":"db_server_creds","kind":"app_credential"},"connection_type":"SSH","connection_port":22,"delay_secs":"60","retries":"5","address":"@@{ip_address}@@","disable_readiness_probe":false,"connection_protocol":""}}],"package_definition_list":[{"type":"DEB","name":"EraPackage","description":"","variable_list":[],"action_list":[],"service_local_reference_list":[{"name":"Era","kind":"app_service"}],"version":"","options":{"type":"","install_runbook":{"name":"a56589a3_runbook","description":"","task_definition_list":[{"type":"DAG","name":"7bd63f34_dag","description":"","attrs":{"type":"","edges":[{"type":"","from_task_reference":{"name":"GetClusterID","kind":"app_task"},"to_task_reference":{"name":"GetProfileIDs","kind":"app_task"},"edge_type":"user_defined"},{"type":"","from_task_reference":{"name":"GetProfileIDs","kind":"app_task"},"to_task_reference":{"name":"GetSLAID","kind":"app_task"},"edge_type":"user_defined"},{"type":"","from_task_reference":{"name":"MonitorOperation","kind":"app_task"},"to_task_reference":{"name":"GetDatabaseInfo","kind":"app_task"},"edge_type":"user_defined"},{"type":"","from_task_reference":{"name":"ProvisionDB","kind":"app_task"},"to_task_reference":{"name":"MonitorOperation","kind":"app_task"},"edge_type":"user_defined"},{"type":"","from_task_reference":{"name":"GetSLAID","kind":"app_task"},"to_task_reference":{"name":"generate_vm_name","kind":"app_task"},"edge_type":"user_defined"},{"type":"","from_task_reference":{"name":"generate_vm_name","kind":"app_task"},"to_task_reference":{"name":"ProvisionDB","kind":"app_task"},"edge_type":"user_defined"}]},"child_tasks_local_reference_list":[{"name":"GetClusterID","kind":"app_task"},{"name":"GetProfileIDs","kind":"app_task"},{"name":"GetSLAID","kind":"app_task"},{"name":"generate_vm_name","kind":"app_task"},{"name":"ProvisionDB","kind":"app_task"},{"name":"MonitorOperation","kind":"app_task"},{"name":"GetDatabaseInfo","kind":"app_task"}],"variable_list":[],"target_any_local_reference":{"name":"EraPackage","kind":"app_package"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"SET_VARIABLE","name":"GetClusterID","description":"","attrs":{"type":"","script":"era_ip = \"@@{era_ip}@@\"\nera_user = \"@@{era_creds.username}@@\"\nera_pass = \"@@{era_creds.secret}@@\"\n\n# Construct API Headers\nget_headers = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get Cluster ID\napi_url = \"https:\/\/{}\/era\/v0.9\/clusters\".format(era_ip)\nr = urlreq(api_url, verb='GET', headers=get_headers, verify=False, auth=\"BASIC\", user=era_user, passwd=era_pass)\n\nif r.ok:\n    resp = json.loads(r.content.decode(\"utf-8\"))\n    cluster_id = resp[0]['id']\n    print(\"CLUSTER_ID={0}\".format(cluster_id))\nelse:\n    print(\"GET request failed\", r.content)\n    exit(1)","script_type":"static_py3","exit_status":[],"eval_scope":"local","eval_variables":["CLUSTER_ID"]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"SET_VARIABLE","name":"GetProfileIDs","description":"","attrs":{"type":"","script":"era_ip = \"@@{era_ip}@@\"\nera_user = \"@@{era_creds.username}@@\"\nera_pass = \"@@{era_creds.secret}@@\"\nsoftware_profile = \"@@{software_profile}@@\"\ncompute_profile = \"@@{compute_profile}@@\"\nnetwork_profile = \"@@{network_profile}@@\"\ndatabase_parameter = \"@@{database_parameter}@@\"\n\n# Construct API Headers\nget_headers = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get Software Profile ID\napi_url = \"https:\/\/{}\/era\/v0.9\/profiles?type=Software&name={}\".format(era_ip, software_profile)\nr = urlreq(api_url, verb='GET', headers=get_headers, verify=False, auth=\"BASIC\", user=era_user, passwd=era_pass)\n\nif r.ok:\n    resp = json.loads(r.content.decode(\"utf-8\"))\n    software_prof_id = resp['id']\n    print(\"SOFTWARE_PROF_ID={0}\".format(software_prof_id))\n    \n    # Get Software Profile Version ID\n    api_url_version = \"https:\/\/{}\/era\/v0.9\/profiles\/{}\/versions\/latest\".format(era_ip, software_prof_id)\n    r_version = urlreq(api_url_version, verb='GET', headers=get_headers, verify=False, auth=\"BASIC\", user=era_user, passwd=era_pass)\n    \n    if r_version.ok:\n        resp_version = json.loads(r_version.content.decode(\"utf-8\"))\n        if 'id' in resp_version:\n            software_prof_version_id = resp_version['id']\n            print(\"SOFTWARE_PROF_VERSION_ID={0}\".format(software_prof_version_id))\n        else:\n            print(\"GET request failed: No 'id' field found in version response\", r_version.content)\n            exit(1)\n    else:\n        print(\"GET request failed for software profile version\", r_version.content)\n        exit(1)\nelse:\n    print(\"GET request failed\", r.content)\n    exit(1)\n\n# Get Compute Profile ID\napi_url = \"https:\/\/{}\/era\/v0.9\/profiles?type=Compute&name={}\".format(era_ip, compute_profile)\nr = urlreq(api_url, verb='GET', headers=get_headers, verify=False, auth=\"BASIC\", user=era_user, passwd=era_pass)\n\nif r.ok:\n    resp = json.loads(r.content.decode(\"utf-8\"))\n    compute_prof_id = resp['id']\n    print(\"COMPUTE_PROF_ID={0}\".format(compute_prof_id))\nelse:\n    print(\"GET request failed\", r.content)\n    exit(1)\n\n# Get Network Profile ID\napi_url = \"https:\/\/{}\/era\/v0.9\/profiles?type=Network&name={}\".format(era_ip, network_profile)\nr = urlreq(api_url, verb='GET', headers=get_headers, verify=False, auth=\"BASIC\", user=era_user, passwd=era_pass)\n\nif r.ok:\n    resp = json.loads(r.content.decode(\"utf-8\"))\n    network_prof_id = resp['id']\n    print(\"NETWORK_PROF_ID={0}\".format(network_prof_id))\nelse:\n    print(\"GET request failed\", r.content)\n    exit(1)\n\n# Get DB Parameter ID\napi_url = \"https:\/\/{}\/era\/v0.9\/profiles?type=Database_Parameter&name={}\".format(era_ip, database_parameter)\nr = urlreq(api_url, verb='GET', headers=get_headers, verify=False, auth=\"BASIC\", user=era_user, passwd=era_pass)\n\nif r.ok:\n    resp = json.loads(r.content.decode(\"utf-8\"))\n    db_param_id = resp['id']\n    print(\"DB_PARAM_ID={0}\".format(db_param_id))\nelse:\n    print(\"GET request failed\", r.content)\n    exit(1)","script_type":"static_py3","exit_status":[],"eval_scope":"local","eval_variables":["COMPUTE_PROF_ID","DB_PARAM_ID","NETWORK_PROF_ID","SOFTWARE_PROF_ID","SOFTWARE_PROF_VERSION_ID"]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"SET_VARIABLE","name":"GetSLAID","description":"","attrs":{"type":"","script":"era_ip = \"@@{era_ip}@@\"\nera_user = \"@@{era_creds.username}@@\"\nera_pass = \"@@{era_creds.secret}@@\"\nsla_name = \"@@{sla_name}@@\"\n\n# Construct API Headers\nget_headers = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get the list of SLAs\napi_url = \"https:\/\/{}\/era\/v0.9\/slas\".format(era_ip)\nr = urlreq(api_url, verb='GET', headers=get_headers, verify=False, auth=\"BASIC\", user=era_user, passwd=era_pass)\n\n# Find the desired SLA, and set the corresponding ID to the variable\nif r.ok:\n    resp = json.loads(r.content.decode(\"utf-8\"))\n    for sla in resp:\n        if sla['name'] == sla_name:\n            print(\"SLA_ID={0}\".format(sla['id']))\n            break\nelse:\n    print(\"GET request failed\", r.content)\n    exit(1)","script_type":"static_py3","exit_status":[],"eval_scope":"local","eval_variables":["SLA_ID"]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"SET_VARIABLE","name":"generate_vm_name","description":"","attrs":{"type":"","script":"#script\n\n# Append static 's' which stands for server at the beginning to the VM\nvm_name = \"db\"\n# Append static 'pc' which stands for Private Cloud to the VM\nvm_name += \"pg\"\n\n# Append static 'qnb' identifier\nvm_name += \"qnb\"\n\n# Append static environment variable to the VM\nvar_environment = \"@@{var_environment}@@\"\nvm_name += var_environment\n\n# Determine VM index based on array index for counter logic\nvar_array_index = @@{calm_array_index}@@\nif var_array_index%2 == 0:\n    vm_index = \"1\"\nelse:\n    vm_index = \"2\"\n\n# Fetch existing VMs based on suffix\npc_ip = \"@@{pc_ip}@@\"\npc_user = \"@@{pc_username}@@\"\npc_pass = \"@@{pc_password}@@\"\n\n# Construct API URL and Headers\napi_url = \"https:\/\/{}:9440\/api\/vmm\/v4.0\/ahv\/config\/vms?$filter=startswith(name,'{}{}')&$select=name\".format(pc_ip,vm_name,vm_index)\nget_headers = {'Content-Type': 'application\/json',  'Accept':'application\/json'}\n\n# Fetch VM Data and ETag\nr = urlreq(api_url, verb='GET', headers=get_headers, verify=False, auth=\"BASIC\", user=pc_user, passwd=pc_pass)\nif r.ok:\n    resp = json.loads(r.content)\n    print(resp)\n    if resp['metadata']['totalAvailableResults'] == 0:\n      vm_suffix = 0\n    else:\n      list_of_vms = [item['name'] for item in resp['data']]\n      list_of_vms.sort()\n      vm_suffix = int(list_of_vms[-1][-2:])\n    vm_count = (int(vm_index) * 100) + int(vm_suffix) + (int(var_array_index)\/\/2+1)\nelse:\n    print(\"Get request failed\", r.content)\n    exit(1)\n\nprint(\"vm_name = \" + str(vm_name) + str(vm_count))\n","script_type":"static_py3","exit_status":[],"eval_scope":"local","eval_variables":["vm_name"]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"SET_VARIABLE","name":"ProvisionDB","description":"","attrs":{"type":"","script":"era_ip = \"@@{era_ip}@@\"\nera_user = \"@@{era_creds.username}@@\"\nera_pass = \"@@{era_creds.secret}@@\"\nvar_environment = \"@@{var_environment}@@\"\nvm_name_generated = \"@@{vm_name}@@\"  # From generate_vm_name task (if available)\ndb_name_input = \"@@{db_name}@@\"\n\n# Determine base name using priority:\n# 1. Use vm_name if generated by generate_vm_name task (follows client convention)\n# 2. Use db_name if provided by user\n# 3. Generate from client naming convention as fallback\nif vm_name_generated and vm_name_generated.strip() and vm_name_generated.strip() != \"\" and vm_name_generated.strip() != \"@@{vm_name}@@\":\n    # Use vm_name generated by generate_vm_name task (already follows client convention)\n    base_name = vm_name_generated.strip()\n    print(\"Using vm_name from generate_vm_name task: {}\".format(base_name))\nelif db_name_input and db_name_input.strip() and db_name_input.strip() != \"\" and db_name_input.strip() != \"@@{db_name}@@\":\n    # Use provided db_name as base (user may have customized it)\n    base_name = db_name_input.strip()\n    print(\"Using provided db_name as base: {}\".format(base_name))\nelse:\n    # Generate name following client convention: dbpgqnb{env}{timestamp}\n    # This matches the pattern used in generate_vm_name_HA.py: dbpgqnb{env}{counter}\n    timestamp = \"@@{calm_time('%Y%m%d%H%M')}@@\"\n    base_name = \"dbpgqnb{}{}\".format(var_environment, timestamp)\n    print(\"Generated base name from client naming convention: {}\".format(base_name))\n\n# Generate all component names following client naming convention\n# All names derived from base_name for consistency\ncluster_name = base_name\ntime_machine_name = \"{}_TM\".format(base_name)\nhaproxy_vm_name = \"{}_haproxy1\".format(base_name)\nprimary_vm_name = \"{}-1\".format(base_name)\nsecondary_vm_name_1 = \"{}-2\".format(base_name)\nsecondary_vm_name_2 = \"{}-3\".format(base_name)\npatroni_cluster_name = base_name\n\n# Display generated names for verification\nprint(\"=\" * 80)\nprint(\"AUTO-GENERATED NAMES (Client Naming Convention):\")\nprint(\"=\" * 80)\nprint(\"Base Name:              {}\".format(base_name))\nprint(\"Cluster Name:           {}\".format(cluster_name))\nprint(\"Time Machine:           {}\".format(time_machine_name))\nprint(\"HAProxy VM:             {}\".format(haproxy_vm_name))\nprint(\"Primary DB VM:          {}\".format(primary_vm_name))\nprint(\"Secondary DB VM 1:      {}\".format(secondary_vm_name_1))\nprint(\"Secondary DB VM 2:      {}\".format(secondary_vm_name_2))\nprint(\"Patroni Cluster:        {}\".format(patroni_cluster_name))\nprint(\"=\" * 80)\nprint()\n\n# Construct API Headers\npost_headers = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Construct API URL - Changed to databases\/provision for HA cluster\napi_url = \"https:\/\/{}\/era\/v0.9\/databases\/provision\".format(era_ip)\n\n# Payload for HA PostgreSQL Database Cluster Provisioning\n# Based on curl command structure\npayload = {\n  \"databaseType\": \"postgres_database\",\n  \"name\": cluster_name,\n  \"softwareProfileId\": \"@@{SOFTWARE_PROF_ID}@@\",\n  \"softwareProfileVersionId\": \"@@{SOFTWARE_PROF_VERSION_ID}@@\",\n  \"computeProfileId\": \"@@{COMPUTE_PROF_ID}@@\",\n  \"networkProfileId\": \"@@{NETWORK_PROF_ID}@@\",\n  \"dbParameterProfileId\": \"@@{DB_PARAM_ID}@@\",\n  \"timeMachineInfo\": {\n    \"name\": time_machine_name,\n    \"description\": \"\",\n    \"schedule\": {\n      \"snapshotTimeOfDay\": {\n        \"hours\": 7,\n        \"minutes\": 0,\n        \"seconds\": 0\n      },\n      \"continuousSchedule\": {\n        \"enabled\": True,\n        \"logBackupInterval\": 30,\n        \"snapshotsPerDay\": 1\n      },\n      \"weeklySchedule\": {\n        \"enabled\": True,\n        \"dayOfWeek\": \"WEDNESDAY\"\n      },\n      \"monthlySchedule\": {\n        \"enabled\": True,\n        \"dayOfMonth\": 14\n      },\n      \"quartelySchedule\": {\n        \"enabled\": True,\n        \"startMonth\": \"JANUARY\",\n        \"dayOfMonth\": 14\n      },\n      \"yearlySchedule\": {\n        \"enabled\": False,\n        \"dayOfMonth\": 31,\n        \"month\": \"DECEMBER\"\n      }\n    },\n    \"tags\": [],\n    \"autoTuneLogDrive\": True,\n    \"slaDetails\": {\n      \"primarySla\": {\n        \"slaId\": \"@@{SLA_ID}@@\",\n        \"nxClusterIds\": [\"@@{CLUSTER_ID}@@\"]\n      }\n    }\n  },\n  \"actionArguments\": [\n    {\"name\": \"proxy_write_port\", \"value\": \"5000\"},\n    {\"name\": \"listener_port\", \"value\": \"5432\"},\n    {\"name\": \"proxy_read_port\", \"value\": \"5001\"},\n    {\"name\": \"database_size\", \"value\": \"200\"},\n    {\"name\": \"auto_tune_staging_drive\", \"value\": True},\n    {\"name\": \"provision_virtual_ip\", \"value\": True},\n    {\"name\": \"deploy_haproxy\", \"value\": True},\n    {\"name\": \"enable_synchronous_mode\", \"value\": True},\n    {\"name\": \"failover_mode\", \"value\": \"Automatic\"},\n    {\"name\": \"node_type\", \"value\": \"database\"},\n    {\"name\": \"allocate_pg_hugepage\", \"value\": False},\n    {\"name\": \"cluster_database\", \"value\": False},\n    {\"name\": \"cte_intent\", \"value\": False},\n    {\"name\": \"archive_wal_expire_days\", \"value\": \"2\"},\n    {\"name\": \"backup_policy\", \"value\": \"primary_only\"},\n    {\"name\": \"enable_peer_auth\", \"value\": False},\n    {\"name\": \"ensure_vm_host_distribution\", \"value\": False},\n    {\"name\": \"cluster_name\", \"value\": cluster_name},\n    {\"name\": \"patroni_cluster_name\", \"value\": patroni_cluster_name},\n    {\"name\": \"db_user\", \"value\": \"postgres\"},\n    {\"name\": \"database_names\", \"value\": base_name},\n    {\"name\": \"db_password\", \"value\": \"@@{db_password}@@\"}\n  ],\n  \"createDbserver\": True,\n  \"nodeCount\": 4,\n  \"nxClusterId\": \"@@{CLUSTER_ID}@@\",\n  \"sshPublicKey\":\"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDHCVVkwzdXUAYC2EXLtK6VEvMRxv0YJVhGz5r4hwMzN9FJ\/h1oU5wpB9d\/xcLFgHbFiiRsSP9dtRN8AO4KZDkQJPXPGbVG2Nu4D9jb9QOTrnFaYjH8JaX31YAG6ncnsw26UPtlL0JiP0Nh2dvW\/w9rmDroAjhIytKz1emzoM+ZC7ddVh0zsCJ3TvR9K2BCKSXiNaL9nGSAgOPbi2DFJc2AO9pIAH5uBKF3yPWnQSSHFYEoxkmIMX8Gk6IpGuRKYvCfFM4TihWHYhUkpjK58+776c\/hegzgRqfB3xQdDDNNO83L89f8\/extB9F+O2ve2OlAfhjMN9VErYI8P03KvY2l rsa-key-20260115\",\n  \"clustered\": True,\n  \"nodes\": [\n    {\n      \"properties\": [\n        {\"name\": \"node_type\", \"value\": \"haproxy\"}\n      ],\n      \"vmName\": haproxy_vm_name,\n      \"nxClusterName\": None,\n      \"nxClusterId\": \"@@{CLUSTER_ID}@@\"\n    },\n    {\n      \"vmName\": primary_vm_name,\n      \"properties\": [\n        {\"name\": \"role\", \"value\": \"Primary\"},\n        {\"name\": \"failover_mode\", \"value\": \"Automatic\"},\n        {\"name\": \"node_type\", \"value\": \"database\"},\n        {\"name\": \"remote_archive_destination\", \"value\": \"\"}\n      ],\n      \"nxClusterName\": None,\n      \"networkProfileId\": \"@@{NETWORK_PROF_ID}@@\",\n      \"computeProfileId\": \"@@{COMPUTE_PROF_ID}@@\",\n      \"nxClusterId\": \"@@{CLUSTER_ID}@@\"\n    },\n    {\n      \"vmName\": secondary_vm_name_1,\n      \"properties\": [\n        {\"name\": \"role\", \"value\": \"Secondary\"},\n        {\"name\": \"failover_mode\", \"value\": \"Automatic\"},\n        {\"name\": \"node_type\", \"value\": \"database\"},\n        {\"name\": \"remote_archive_destination\", \"value\": \"\"}\n      ],\n      \"nxClusterName\": None,\n      \"networkProfileId\": \"@@{NETWORK_PROF_ID}@@\",\n      \"computeProfileId\": \"@@{COMPUTE_PROF_ID}@@\",\n      \"nxClusterId\": \"@@{CLUSTER_ID}@@\"\n    },\n    {\n      \"vmName\": secondary_vm_name_2,\n      \"properties\": [\n        {\"name\": \"role\", \"value\": \"Secondary\"},\n        {\"name\": \"failover_mode\", \"value\": \"Automatic\"},\n        {\"name\": \"node_type\", \"value\": \"database\"},\n        {\"name\": \"remote_archive_destination\", \"value\": \"\"}\n      ],\n      \"nxClusterName\": None,\n      \"networkProfileId\": \"@@{NETWORK_PROF_ID}@@\",\n      \"computeProfileId\": \"@@{COMPUTE_PROF_ID}@@\",\n      \"nxClusterId\": \"@@{CLUSTER_ID}@@\"\n    }\n  ],\n  \"vmPassword\": None,\n  \"autoTuneStagingDrive\": True\n}\n\n# Print payload JSON for debugging\npayload_json = json.dumps(payload, indent=2)\nprint(\"=\" * 80)\nprint(\"PAYLOAD JSON:\")\nprint(\"=\" * 80)\nprint(payload_json)\nprint(\"=\" * 80)\nprint()\n\n# Make the call and set the response operation ID to the variable\nr = urlreq(api_url, verb='POST', headers=post_headers, verify=False, auth=\"BASIC\", user=era_user, passwd=era_pass, params=json.dumps(payload))\n\nif r.ok:\n    resp = json.loads(r.content.decode(\"utf-8\"))\n    print(\"CREATE_OPERATION_ID={0}\".format(resp['operationId']))\nelse:\n    print(\"POST request failed\", r.content)\n    exit(1)\n","script_type":"static_py3","exit_status":[],"eval_scope":"local","eval_variables":["CREATE_OPERATION_ID"]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"SET_VARIABLE","name":"MonitorOperation","description":"","attrs":{"type":"","script":"era_ip = \"@@{era_ip}@@\"\nera_user = \"@@{era_creds.username}@@\"\nera_pass = \"@@{era_creds.secret}@@\"\ncreate_operation_id = \"@@{CREATE_OPERATION_ID}@@\"\n\n# Construct API Headers\nget_headers = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Monitor the operation\nfor x in range(20):\n    print(\"Sleeping for 60 seconds.\")\n    sleep(60)\n    \n    # Construct API URL\n    api_url = \"https:\/\/{}\/era\/v0.9\/operations\/{}\".format(era_ip, create_operation_id)\n    r = urlreq(api_url, verb='GET', headers=get_headers, verify=False, auth=\"BASIC\", user=era_user, passwd=era_pass)\n    \n    if r.ok:\n        resp = json.loads(r.content.decode(\"utf-8\"))\n        percentage_complete = resp['percentageComplete']\n        print(\"Percentage Complete: {0}\".format(percentage_complete))\n        \n        # If complete, break out of loop\n        if percentage_complete == \"100\":\n            break\n    else:\n        print(\"GET request failed\", r.content)\n        exit(1)\n\n# Check final status\nif r.ok:\n    resp = json.loads(r.content.decode(\"utf-8\"))\n    if resp['percentageComplete'] != \"100\":\n        print(\"Get Operation ID timed out\", json.dumps(resp, indent=4))\n        exit(1)\n    \n    # Get the newly provision DB Entity Name and set it to a variable\n    if 'entityName' in resp:\n        print(\"DB_ENTITY_NAME={0}\".format(resp['entityName']))\n    else:\n        print(\"Warning: entityName not found in response\")\nelse:\n    print(\"GET request failed\", r.content)\n    exit(1)","script_type":"static_py3","exit_status":[],"eval_scope":"local","eval_variables":["DB_ENTITY_NAME"]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"SET_VARIABLE","name":"GetDatabaseInfo","description":"","attrs":{"type":"","script":"era_ip = \"@@{era_ip}@@\"\nera_user = \"@@{era_creds.username}@@\"\nera_pass = \"@@{era_creds.secret}@@\"\ndb_entity_name = \"@@{DB_ENTITY_NAME}@@\"\n\n# Construct API Headers\nget_headers = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get DB Server IP and ID\n# Since we provisioned a DB server VM, we use the dbservers endpoint\napi_url = \"https:\/\/{}\/era\/v0.9\/dbservers?name={}&detailed=true\".format(era_ip, db_entity_name)\nr = urlreq(api_url, verb='GET', headers=get_headers, verify=False, auth=\"BASIC\", user=era_user, passwd=era_pass)\n\nif r.ok:\n    resp_list = json.loads(r.content.decode(\"utf-8\"))\n    \n    if isinstance(resp_list, list) and len(resp_list) > 0:\n        # Since we filtered by name, the target server is the first element\n        resp = resp_list[0]\n        \n        db_server_ip = resp.get('ipAddresses', [None])[0] or resp.get('ipAddress', 'N\/A')\n        print(\"DB_SERVER_IP={0}\".format(db_server_ip))\n        print(\"DB_SERVER_ID={0}\".format(resp['id']))\n    else:\n        print(\"No DB Server found with name: {}\".format(db_entity_name))\nelse:\n    print(\"GET request failed\", r.content)","script_type":"static_py3","exit_status":[],"eval_scope":"local","eval_variables":["DB_ID","DB_SERVER_ID","DB_SERVER_IP"]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"7bd63f34_dag","kind":"app_task"},"variable_list":[]},"uninstall_runbook":{"name":"a8f36ab1_runbook","description":"","task_definition_list":[{"type":"DAG","name":"99b487fd_dag","description":"","attrs":{"type":"","edges":[{"type":"","from_task_reference":{"name":"1CleanupDB","kind":"app_task"},"to_task_reference":{"name":"2MonitorCleanupOp","kind":"app_task"},"edge_type":"user_defined"},{"type":"","from_task_reference":{"name":"3DeregisterDBServer","kind":"app_task"},"to_task_reference":{"name":"4MonitorDeregOp","kind":"app_task"},"edge_type":"user_defined"},{"type":"","from_task_reference":{"name":"2MonitorCleanupOp","kind":"app_task"},"to_task_reference":{"name":"3DeregisterDBServer","kind":"app_task"},"edge_type":"user_defined"}]},"child_tasks_local_reference_list":[{"name":"1CleanupDB","kind":"app_task"},{"name":"2MonitorCleanupOp","kind":"app_task"},{"name":"3DeregisterDBServer","kind":"app_task"},{"name":"4MonitorDeregOp","kind":"app_task"}],"variable_list":[],"target_any_local_reference":{"name":"EraPackage","kind":"app_package"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"SET_VARIABLE","name":"1CleanupDB","description":"","attrs":{"type":"","script":"era_ip = \"@@{era_ip}@@\"\nera_user = \"@@{era_creds.username}@@\"\nera_pass = \"@@{era_creds.secret}@@\"\ndb_server_id = \"@@{DB_SERVER_ID}@@\" # Ensure this is the DB Server UUID, not the DB UUID\n\n# Construct API Headers\ndelete_headers = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# VALID v0.9 API URL\n# delete_storage=true: Removes the VM and disks from the Nutanix Cluster\n# remove_from_ndb=true: Removes the registration entry from the NDB console\napi_url = \"https:\/\/{}\/era\/v0.9\/dbservers\/{}?delete_storage=true&remove_from_ndb=true\".format(era_ip, db_server_id)\n\nr = urlreq(api_url, verb='DELETE', headers=delete_headers, verify=False, auth=\"BASIC\", user=era_user, passwd=era_pass)\n\nif r.ok:\n    resp = json.loads(r.content.decode(\"utf-8\"))\n    # The response for a DELETE in v0.9 usually contains the operationId\n    print(\"CLEANUP_OPERATION_ID={0}\".format(resp.get('operationId', 'NO_OP_ID_RETURNED')))\nelse:\n    # If it fails, it's often because a Database is still attached to the server\n    print(\"DELETE request failed. Status: {0}, Content: {1}\".format(r.status_code, r.content))\n    exit(1)","script_type":"static_py3","exit_status":[],"eval_scope":"local","eval_variables":["CLEANUP_OPERATION_ID"]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"2MonitorCleanupOp","description":"","attrs":{"type":"","script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{CLEANUP_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 30 seconds.\"\n  sleep(30)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 10 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  print \"Cleanup Operation timed out\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)","script_type":"static_py3","command_line_args":"","exit_status":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"SET_VARIABLE","name":"3DeregisterDBServer","description":"","attrs":{"type":"","script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Cleanup the DB and get Operation ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/dbservers\/@@{DB_SERVER_ID}@@?remove=false&soft-remove=false&delete=true&delete-vm-snapshots=true&delete-vgs=true\"\nresp = urlreq(url, verb='DELETE', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nif resp.ok:\n  print \"DEREGISTER_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])\nelse:\n  print \"Deregister DB Server Operation failed\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)","script_type":"static_py3","exit_status":[],"eval_scope":"local","eval_variables":["DEREGISTER_OPERATION_ID"]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]},{"type":"EXEC","name":"4MonitorDeregOp","description":"","attrs":{"type":"","script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{DEREGISTER_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 30 seconds.\"\n  sleep(30)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 10 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  print \"Deregistration Operation timed out\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)","script_type":"static_py3","command_line_args":"","exit_status":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Era","kind":"app_service"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"99b487fd_dag","kind":"app_task"},"variable_list":[]},"upgrade_runbook":{}}},{"type":"DEB","name":"Package2","description":"","variable_list":[],"action_list":[],"service_local_reference_list":[{"name":"Postgres","kind":"app_service"}],"version":"","options":{"type":"","install_runbook":{"name":"8b1f1a7b_runbook","description":"","task_definition_list":[{"type":"DAG","name":"58ca4a03_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Package2","kind":"app_package"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"58ca4a03_dag","kind":"app_task"},"variable_list":[]},"uninstall_runbook":{"name":"faacff5d_runbook","description":"","task_definition_list":[{"type":"DAG","name":"ee8bedbe_dag","description":"","attrs":{"type":"","edges":[]},"child_tasks_local_reference_list":[],"variable_list":[],"target_any_local_reference":{"name":"Package2","kind":"app_package"},"timeout_secs":"0","retries":"0","inherit_target":false,"status_map_list":[]}],"main_task_local_reference":{"name":"ee8bedbe_dag","kind":"app_task"},"variable_list":[]},"upgrade_runbook":{}}}],"app_profile_list":[{"name":"Default","description":"","variable_list":[{"type":"LOCAL","name":"compute_profile","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"editables":{"value":true},"value":"PostgreSQL"},{"type":"LOCAL","name":"database_parameter","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"editables":{"value":true},"value":"DEFAULT_POSTGRES_HA_PARAMS"},{"type":"LOCAL","name":"db_name","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","editables":{"value":true},"value":"psql_@@{calm_time(\"%Y%m%d%H%M\")}@@"},{"type":"SECRET","name":"db_password","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":"","is_secret_modified":false,"secret_reference":{}},"editables":{"value":true},"value":"Qs5CxgB70Ja63SA74trbHZK\/3xyH8qXs7TqqpJdO+XzeAsUCTyUxA8g8pg==:utf-8"},{"type":"LOCAL","name":"db_public_key","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"editables":{"value":true},"value":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCeTSmMNY9hiXa2xwY4Upxb2eMQSERVzI7Jc1pZJKSXpdJzf0UW+C5gMle6GXaLj7hWFeQKGgQlTjXDrKkwH2GA08mccu2f+0UkU8OO6dL9JTGQKJMsrury+7RWHex2xdZxqpJMcvhVslSZvRgsr9FWlfnnz55x2ssmU9Ynhu1ZIfaTvlI8gHQHiTeLvuzfnT8l2wNnNCx5IPbptowPeifwDpgwUoVx953dEjVdSmy8k+g7iTpUOqj49fDjyIfbUUJg25uDip04ifJ74KD8GRQc7k7qsAF7qxYyDjBbc7Mw+OrhHjVmVqTaFuRb9xy\/Xp4xppkOcCbnhlbL3aV0Na5z rsa-key-20260112"},{"type":"LOCAL","name":"era_ip","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"editables":{"value":true},"value":"10.38.176.15"},{"type":"LOCAL","name":"network_profile","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"editables":{"value":true},"value":"DEFAULT_OOB_POSTGRESQL_NETWORK"},{"type":"LOCAL","name":"sla_name","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"editables":{"value":true},"value":"DEFAULT_OOB_BRONZE_SLA"},{"type":"LOCAL","name":"software_profile","description":"","is_hidden":false,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","editables":{"value":true},"value":"POSTGRES_15.6_HA_ENABLED_ROCKY_LINUX_8_OOB"},{"type":"LOCAL","name":"pc_username","description":"","options":{"type":"PREDEFINED","choices":[]},"is_hidden":true,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"editables":{"value":false},"value":"admin"},{"type":"SECRET","name":"pc_password","description":"","options":{"type":"PREDEFINED","choices":[]},"is_hidden":true,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":"SECRET","is_secret_modified":false,"secret_reference":{}},"editables":{"value":false},"value":"XndyZ3kJQ1frDOR6rRDhmGTQf6bjOByj6B5Xr\/e4BCBI6AqOlNFUb\/0hUw==:utf-8"},{"type":"LOCAL","name":"pc_ip","description":"","options":{"type":"PREDEFINED","choices":[]},"is_hidden":true,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"editables":{"value":false},"value":"10.38.176.7"},{"type":"LOCAL","name":"var_environment","description":"","options":{"type":"PREDEFINED","choices":[]},"is_hidden":true,"is_mandatory":false,"data_type":"BASE","val_type":"STRING","label":"","attrs":{"type":""},"editables":{"value":false},"value":"np"}],"action_list":[],"deployment_create_list":[{"type":"GREENFIELD","name":"f6be2786_deployment","description":"","variable_list":[],"action_list":[],"depends_on_list":[],"min_replicas":"1","max_replicas":"1","default_replicas":"1","package_local_reference_list":[{"name":"Package2","kind":"app_package"}],"substrate_local_reference":{"name":"Era_PostgreSQL_DB","kind":"app_substrate"},"published_service_local_reference_list":[]},{"type":"GREENFIELD","name":"f9a4c530_deployment","description":"","variable_list":[],"action_list":[],"depends_on_list":[],"min_replicas":"1","max_replicas":"1","default_replicas":"1","package_local_reference_list":[{"name":"EraPackage","kind":"app_package"}],"substrate_local_reference":{"name":"EraServer","kind":"app_substrate"},"published_service_local_reference_list":[]}],"snapshot_config_list":[],"restore_config_list":[],"environment_reference_list":[],"application_url":"","patch_list":[]}],"credential_definition_list":[{"type":"KEY","name":"db_server_creds","description":"","username":"era","secret":{"attrs":{"secret_reference":{},"is_secret_modified":true},"value":"EucU9SvDIrL9Q4Ga+0eXX7hXa9NEdilX5ly\/UdsQ+kr1QYMvWIw82MT8yAFRlzQd0sf5\/SqX0Sk6+9+KChtGVpC96UK45Er+pLV7YnSNn8HAhb2HbKll9g4Bx7mzE\/mo6pmtJ5QhGsWFn9v6mAC6hGHIDqR9nutBla80kP0WJ9NMpuZ1bUXwYhpH1Trk8C4Sa4qHqmCQsujmNIWd5iM0G8ZVWkBC6LV+oQGek0ov\/qpKW8yeIUgvDGKg3\/wn\/XhSRcoYnZppc1xC7RlSLs5ZHapeSmFTak\/u7f30pCiPZltv6CGPshGAwPgNx3xEZfr8Y3xJKziD5bgTJaorxr7xE\/CQCRXtwVXo+4zxHvHaKKbye1k0HKROUPYsdRJTDA5ySzwSdxtJih4LxtW5LdB5ItAGv6e+SRRbPy0CaBLVccww9UlNVPFSeuovwXHgxj7\/SPiYPPpipj+TgOfX1WOqn0DlPpZnLtvf5J11us0MTaVhrwu2mY6Kc5TBCFiLVAfqCI\/qhRlB1GMF\/HZQIedqcUuXWDZdFqbHFl+K5z3fu+HNloHNB9MzugP17GKMbzgFxjNHwMs8vpO1GsZ9nDDvwbG6opXcY\/B7xeqV2GnMzLcGqNIeEZCCpH1EFzow5FlwZOSB8xKmRRU5X0pRpWXc6gt0FLVsLp23AVgf4b4Cd3rMUp2+4MOzA0apGivtH6Xmn4YiiSRuTjNEfd3cFlBNbu0iE9wql+lixI9f4JY9BkVKnG4xoXLIE+AoMSORqDBDOhw4WJx7q0PDWJUb5Z46F+5QtF\/5AJ9whuQzq\/GVsGqnzNeshoumoGLgdj0lD\/DN+8wLaQkvYPgGRaObwuAW3UYsJ+KDFxr2e9JlI+Q5Bxgc7qQ41hIFcFF1wOz8lsyndprjaqbIJkCkqrnMcEYiq5OCtf5DvMTLjNJlg3V0WCK2hHPH1i94o5kAAzJKCYQk4hnZob\/cCfVJhgO15X+OqYDyLwj6I7sZjIXKvjYlmxP7USpS3b\/akmElaOMLGEDEOeP1Cd3MzDG0ho7kOKOVCra7ptT9a2lQFrC3WyKC63BDtUfln\/jaM6YYUfRAsHKFnNlPp0TS3g0EEBISKs7XrOOOq+vFZg4iqKFahln9pO1UJjiDCdL1XgpOCuhD+wtMmIq9c0u49sUv7BmUU1El2JZ0+4e0lqF0101m3Wyr75SnrLXvmGWr8+dC1DljRQsiy2eUhl348qZr4h7QPvrR6IiG4UbS1PlQNomC14mfoRp2vqbyJOqqmX43E0BMPxA7+1j+CL4eIishHoMt4QeT29Qrf7f7eEwnUE5wwbQx4wNOhRPBU1kVcA2bPpcpnnAlmiSB8G474fR9v1LboC7LCORI2jfo2JrSledYXe4zJA\/grm1jACZx6FmoIJscFCMHDX+BVPxk\/4\/3u2xl7h+HSJ2y6JLvfm6DFYDYZZ8XzcsaegQIc6fydqclQgVD70C86zW9\/mNtZRIKlBRnuO22jyhaJ94xZdPYK9F7v\/0m\/zXhEMMZyf7zXHMIxMwPEc4y2OaKU0joe1eLYRm77GKlSqUlJz8mU7gatElsbm7s7vaqTJoh\/qi56Wsldk7fCTCqwSgEgHtvYuowKejRv\/1VXlw84iu+CUoAovlrz3WRJfw8FGs\/ua6xHWmNfXUFD9YcUKcl\/UtfiCVVoNS60iC6j8+WUnqXSYSJf9omDfHWLqkikzR1VEUeneNvT1XNnyDkm+milVPJTLFz1Vzi\/wbZSLbktn+Pfnpii\/LDQkftPss86W8JTpOAvcwGyMq7w\/ytiLop+M49IySGfZhoFJoS8Yq4ELEXnRJt83N9zAzJjOMt3VaTzbFHSDfRt5903jFCZ0q8\/FyN6\/3GvGfkfB1e5qGbUWFHD8FR9m8l7S8KsQR12gg53fXnFxRP\/7s4KB5nNLynOMZ1y6P3rpH4oBBJjIhwA3pmllottF8=:utf-8"},"cred_class":"static"},{"type":"PASSWORD","name":"era_creds","description":"","username":"admin","secret":{"attrs":{"secret_reference":{},"is_secret_modified":true},"value":"EZLP0NWH7zJvqr1mD4Q36kq18jA6gzmC8baq9Q2a7p4WVf3P4bDxYgTPAA==:utf-8"},"cred_class":"static"}],"default_credential_local_reference":{"name":"era_creds","kind":"app_credential"},"type":"USER","client_attrs":{"null":{"y":443,"x":658.75},"f6be2786_deployment":{"y":331,"x":827.75},"f9a4c530_deployment":{"y":304,"x":511}},"global_variable_reference_list":[]}},"api_version":"3.0","product_version":"4.3.0","metadata":{"last_update_time":"1768487183013642","creation_time":"1768408429504022","spec_version":5,"name":"EraPostgresProvision-HA","kind":"blueprint"},"contains_secrets":true}